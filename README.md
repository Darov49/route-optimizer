# RouteOptimizer
Проект разработан в рамках курсового проекта на 3 курсе обучения. Программа позволяет находить кратчайший маршрут между двумя заданными остановками в городе Киров, основываясь на времени в пути.
Функционал разделен на три модуля: парсинг расписания, составление графа остановок городского транспорта, нахождение кратчайшего пути между остановками.

## Парсинг расписания

Контроллер `ScrapperController` производит парсинг расписания городского транспорта с сайта cdsvyatka (https://m.cdsvyatka.com/). Парсинг происходит по всем остановкам для каждого маршрута городского транспорта, расписание для пригородных маршрутов не учитывается.

Для работы используется chromeDriver, находящийся по пути `src/main/resources/drivers` (драйвер актуален для версии Chrome 125.0.6422.114). Для его обновления обратитесь по адресу https://googlechromelabs.github.io/chrome-for-testing/.

В результате работы контроллера в папке `src/main/resources/routes` будут созданы файлы формата JSON с расписаниями соответствующих маршрутов. Текущие файлы расписаний актуальны на 08.06.2024.

## Создание графа остановок

Контроллер `GraphBuilderController` объединяет расписания из вышеупомянутых файлов в единый граф, который в дальнейшем будет использоваться в качестве основной структуры. Созданный файл располагается по пути `src/main/resources/graph.json`.

Если необходимые файлы с расписаниями не будут найдены, появится соответствующее сообщение с предложением запуска контроллера для парсинга.

## Поиск кратчайшего маршрута

Контроллер `DijkstraController` позволяет находить кратчайший маршрут между двумя заданными остановками для конкретного времени отправления. Остановки задаются по их ID, указанными на сайте cdsvytka (для корректной обработки остановок с одинаковыми названиями).
Если необходимый файл с графом остановок не будет найден, появится соответствующее сообщение с предложением запуска контроллера для генерации графа.

Для поиска используется модифицированный алгоритм Дейкстры:
1. Требуется указать время отправления - от него будут зависить все последующие вычисления.
2. Корректная обработка расписаний - при анализе всех возможных путей динамически учитывается расписание маршрутов, чтобы соответствовать действительному движению городского транспорта.
3. Учет возможности пересадок - если для оптимизации времени в пути требуется пересадка, то она будет корректно обработана не только в соответствии с расписанием нового маршрута, но и с учетом времени его ожидания.
4. Оптимизация пересадок - конечный маршрут будет очищен от излишних пересадок. Если в пути будет предложено вернуться на маршрут, используемый ранее, то все промежуточные пересадки будут исключены, а данный фрагмент пути скорректирован.

Полученный путь содержит информацию о времени в пути, о всех промежуточных остановках, времени прибытия на каждую из них и производимых пересадках.

# Заключение
Проект `RouteOptimizer` является удобным инструментом для нахождения оптимальных маршрутов в городе Киров с учетом реального расписания городского транспорта.
